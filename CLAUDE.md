# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **demo e-commerce project** built with React, TanStack Router, Vite, TypeScript, and Tailwind CSS 4. The entire application is RTL (right-to-left) and Persian-friendly. Uses file-based routing and PocketBase for backend.

**Important**: This is a demo/fake project - keep implementations simple and avoid over-engineering.

## Features

- **Categories & Products**: Categories containing multiple products
- **Cart System**: Shopping cart functionality
- **Authentication**: User login/registration
- **User Dashboard**: Simple dashboard for users
- **Admin Dashboard**: Simple admin panel for managing content
- **RTL Support**: Full right-to-left layout for Persian/Farsi content

## Development Commands

```bash
# Install dependencies
npm install

# Start development server (runs on port 3000)
npm run dev

# Build for production (runs both vite build and TypeScript compiler)
npm run build

# Preview production build
npm run serve

# Run all tests
npm run test
```

## Architecture

### Routing

- Uses **TanStack Router** with file-based routing
- Routes are defined in `src/routes/` directory
- Auto-generated route tree is in `src/routeTree.gen.ts` (do not edit manually)
- Root layout is in `src/routes/__root.tsx` - includes devtools and `<Outlet />` for child routes
- Router is configured in `src/main.tsx` with:
  - Intent-based preloading
  - Scroll restoration
  - Structural sharing enabled

### File Structure

- `src/main.tsx` - Application entry point, router initialization
- `src/routes/__root.tsx` - Root layout with TanStack devtools
- `src/routes/` - File-based route definitions (each file = route)
- `src/routeTree.gen.ts` - Auto-generated by TanStack Router plugin
- `@/` path alias maps to `./src/` directory

### Styling

- Tailwind CSS 4 is configured via Vite plugin (`@tailwindcss/vite`)
- Main styles in `src/styles.css`

### Configuration

- TypeScript strict mode enabled with bundler module resolution
- Path alias: `@/*` â†’ `./src/*`
- Vite plugins: TanStack Router (with auto-code-splitting), Tailwind CSS, React
- TanStack Router auto-generates route types for type-safe navigation

### Backend Integration

- PocketBase SDK included as dependency
- Collections needed: users, categories, products, cart_items, orders

### RTL/Persian Support

- HTML `dir="rtl"` and `lang="fa"` configured
- Tailwind CSS configured for RTL with logical properties
- Use Persian/Farsi text throughout the application

## PocketBase Quick Reference

See `docs/pocketbase-quick-reference.md` for detailed examples.

### Key Patterns

**Auth:**
```typescript
const authData = await pb.collection('users').authWithPassword(email, password);
pb.authStore.clear(); // logout
```

**CRUD:**
```typescript
await pb.collection('products').create(data);
await pb.collection('products').getList(1, 20, { filter: '', expand: 'category' });
await pb.collection('products').update(id, data);
```

**API Rules:**
- `@request.auth.id != ""` - authenticated only
- `@request.auth.role = "admin"` - admin only
- `""` - public access

## Important Notes

- This is a DEMO project - keep things simple, avoid over-engineering
- When adding new routes, create files in `src/routes/` - TanStack Router will auto-generate route configuration
- The router instance is registered globally for type safety via module augmentation
- All UI text should be in Persian/Farsi
- Design and layout should follow RTL conventions
- Light, elegant design aesthetic for female audience (not overly girly, professional)

